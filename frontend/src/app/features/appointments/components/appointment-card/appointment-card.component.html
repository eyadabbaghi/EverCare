<div class="p-4 rounded-lg border transition-all cursor-pointer"
     [class]="getCardClass()"
     (click)="onClick.emit(appointment)">

  <!-- Header -->
  <div class="flex items-start justify-between mb-2">
    <div>
      <h4 class="font-semibold text-[#2D1B4E]">{{ appointment.doctorName }}</h4>
      <p class="text-xs text-[#6B5B8C]">{{ appointment.consultationTypeName }}</p>
    </div>
    <span class="inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium"
          [class]="getStatusClass(appointment.status)">
          {{ getStatusLabel(appointment.status) }}
        </span>
  </div>

  <!-- Date & Time -->
  <div class="space-y-1 text-sm text-[#6B5B8C]">
    <div class="flex items-center space-x-2">
      <svg class="w-3 h-3" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
        <path d="M16 2v4"/><path d="M8 2v4"/><path d="M3 10h18"/>
      </svg>
      <span>{{ appointment.startDateTime | date:'dd/MM/yyyy' }}</span>
    </div>
    <div class="flex items-center space-x-2">
      <svg class="w-3 h-3" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/>
      </svg>
      <span>{{ appointment.startDateTime | date:'HH:mm' }}</span>
    </div>
  </div>

  <!-- Caregiver Info -->
  <div *ngIf="appointment.caregiverName" class="mt-2 text-xs p-1 rounded flex items-center"
       [class]="getCaregiverClass(appointment.caregiverPresence)">
    <svg class="w-3 h-3 mr-1" [class]="getCaregiverIconClass(appointment.caregiverPresence)"
         viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
      <circle cx="12" cy="7" r="4"/>
    </svg>
    <span>{{ getCaregiverLabel(appointment) }}</span>
  </div>

  <!-- Action Button -->
  <div *ngIf="showActionButton" class="mt-3">
    <button
      class="w-full text-white text-sm py-1 px-3 rounded-md flex items-center justify-center"
      [class]="getActionButtonClass()"
      (click)="onAction.emit(appointment); $event.stopPropagation()">
      <ng-container *ngIf="appointment.status === 'SCHEDULED'">
        <svg class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M20 6L9 17l-5-5"/>
        </svg>
        Confirmer
      </ng-container>
      <ng-container *ngIf="canJoinCall()">
        <svg class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M22 6l-6 4 6 4V6z"/><rect x="2" y="4" width="16" height="16" rx="2"/>
        </svg>
        Rejoindre
      </ng-container>
    </button>
  </div>

  <!-- Simple Summary -->
  <div *ngIf="appointment.simpleSummary" class="mt-2 text-sm bg-[#F3E8FF] p-2 rounded">
    {{ appointment.simpleSummary }}
  </div>
</div>
