<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4">
  <div class="max-w-xl w-full bg-white rounded-3xl shadow-2xl overflow-hidden">
    <div class="px-6 py-4 bg-gradient-to-r from-[#7C3AED] to-[#A78BFA] text-white flex items-center justify-between">
      <div>
        <p class="text-xs font-semibold uppercase tracking-wide mb-1">
          Screening tool
        </p>
        <h2 class="text-xl font-bold">
          Alzheimer's & memory health check-in
        </h2>
        <p class="text-xs text-white/80 mt-1">
          This is not a diagnosis, but a gentle way to reflect on daily changes.
        </p>
      </div>
      <button
        type="button"
        class="text-sm text-white/80 hover:text-white"
        (click)="close()"
      >
        âœ•
      </button>
    </div>

    <div class="px-6 py-4 border-b border-[#E5E7EB]">
      <div class="flex items-center justify-between text-xs text-[#6B5B8C] mb-2">
        <span>Step {{ currentStep + 1 }} of {{ questions.length }}</span>
        <span>{{ progress }}% complete</span>
      </div>
      <div class="w-full h-1.5 bg-[#E5E7EB] rounded-full overflow-hidden">
        <div
          class="h-full bg-[#7C3AED] transition-all"
          [style.width.%]="progress"
        ></div>
      </div>
    </div>

    <div class="px-6 py-5 space-y-5 max-h-[60vh] overflow-y-auto">
      <ng-container *ngIf="!isLastStep; else summaryView">
        <div class="space-y-2">
          <p class="text-sm font-semibold text-[#2D1B4E]">
            {{ questions[currentStep].prompt }}
          </p>
          <p class="text-sm text-[#4B5563]">
            {{ questions[currentStep].description }}
          </p>
        </div>

        <div class="grid gap-3 mt-4">
          <button
            type="button"
            class="w-full px-4 py-3 rounded-xl border text-sm flex items-center justify-between"
            [ngClass]="{
              'border-[#7C3AED] bg-[#F3E8FF] text-[#7C3AED]': answers[currentStep] === 'never',
              'border-[#E5E7EB] bg-white text-[#374151]': answers[currentStep] !== 'never'
            }"
            (click)="selectAnswer('never')"
          >
            <span>Rarely / never</span>
            <span class="text-xs text-[#6B5B8C]">0 points</span>
          </button>

          <button
            type="button"
            class="w-full px-4 py-3 rounded-xl border text-sm flex items-center justify-between"
            [ngClass]="{
              'border-[#7C3AED] bg-[#F3E8FF] text-[#7C3AED]': answers[currentStep] === 'sometimes',
              'border-[#E5E7EB] bg-white text-[#374151]': answers[currentStep] !== 'sometimes'
            }"
            (click)="selectAnswer('sometimes')"
          >
            <span>Sometimes</span>
            <span class="text-xs text-[#6B5B8C]">1 point</span>
          </button>

          <button
            type="button"
            class="w-full px-4 py-3 rounded-xl border text-sm flex items-center justify-between"
            [ngClass]="{
              'border-[#7C3AED] bg-[#F3E8FF] text-[#7C3AED]': answers[currentStep] === 'often',
              'border-[#E5E7EB] bg-white text-[#374151]': answers[currentStep] !== 'often'
            }"
            (click)="selectAnswer('often')"
          >
            <span>Often</span>
            <span class="text-xs text-[#6B5B8C]">2 points</span>
          </button>
        </div>
      </ng-container>

      <ng-template #summaryView>
        <div class="space-y-3">
          <h3 class="text-lg font-semibold text-[#2D1B4E]">
            Summary & next steps
          </h3>
          <p class="text-sm text-[#4B5563]">
            {{ getSummaryMessage() }}
          </p>
          <div class="mt-3 rounded-xl bg-[#F3E8FF] border border-[#C4B5FD] px-4 py-3 text-xs text-[#4B5563]">
            <p class="font-semibold text-[#7C3AED] mb-1">Important</p>
            <p>
              This screening is informational only and does not replace a medical
              evaluation. If you have urgent safety concerns, please contact emergency
              services.
            </p>
          </div>
        </div>
      </ng-template>
    </div>

    <div class="px-6 py-4 bg-[#F9FAFB] flex items-center justify-between">
      <button
        type="button"
        class="text-sm text-[#6B5B8C] hover:text-[#4B5563]"
        (click)="close()"
      >
        Close
      </button>

      <div class="flex items-center space-x-3">
        <button
          type="button"
          class="px-4 py-2 rounded-full border border-[#E5E7EB] text-sm text-[#374151] hover:bg-white"
          [disabled]="currentStep === 0"
          (click)="previous()"
        >
          Back
        </button>

        <button
          *ngIf="!isLastStep"
          type="button"
          class="px-4 py-2 rounded-full bg-[#7C3AED] text-sm text-white font-medium hover:bg-[#6D28D9]"
          [class.opacity-60]="!canContinue()"
          [class.cursor-not-allowed]="!canContinue()"
          (click)="next()"
        >
          Next question
        </button>

        <button
          *ngIf="isLastStep"
          type="button"
          class="px-4 py-2 rounded-full bg-[#7C3AED] text-sm text-white font-medium hover:bg-[#6D28D9]"
          (click)="close()"
        >
          Finish
        </button>
      </div>
    </div>
  </div>
</div>

